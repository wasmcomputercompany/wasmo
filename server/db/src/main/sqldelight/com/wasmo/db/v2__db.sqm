import com.wasmo.identifiers.AppInstallId;
import com.wasmo.identifiers.ComputerId;
import kotlin.time.Instant;

CREATE TABLE AppInstall (
  id BIGINT AS AppInstallId GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  created_at TIMESTAMPTZ AS Instant NOT NULL,
  computer_id BIGINT AS ComputerId NOT NULL,
  slug VARCHAR(255) NOT NULL,
  version BIGINT NOT NULL,
  display_name VARCHAR(255) NOT NULL
);

CREATE UNIQUE INDEX AppInstallComputerIdSlug ON AppInstall (
  computer_id,
  slug
);
